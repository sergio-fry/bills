<h1><%= @organization.name %></h1>

<div class="card">
  <div class="card-header">
    <%= t('balance').capitalize %>
  </div>
  <div class="card-body">
    <h5 class="card-title organization__balance"><%= link_to number_to_currency(@organization.balance), organization_transactions_url(@organization) %></h5>
    <p class="card-text"></p>
    <% if policy(:income).create?(@organization) %>
      <%= link_to t('add_income'), new_organization_income_path(@organization), class: 'btn btn-primary' %>
    <% end %>

    <% if policy(:expense).create?(@organization) %>
      <%= link_to t('add_expense'), new_organization_expense_path(@organization), class: 'btn btn-primary' %>
    <% end %>
  </div>
</div>


<h2><%= t('members').capitalize %></h2>
<table class="table table-striped table-hover">
  <thead class="">
    <tr>
      <th><%= t('member_name') %></th>
      <th><%= t('phone') %></th>
      <th><%= t('role') %></th>
      <th><%= t('registered_at') %></th>
    </tr>
  </thead>
  <tbody  class="">
    <% @memberships.sort_by(&:name).each do |membership| %>
      <tr>
        <td><%= link_to membership.name, organization_membership_url(@organization, membership) %></td>
        <td><%= membership.phone %></td>
        <td><%= t "roles.#{membership.role}" %></td>
        <td><%= l membership.created_at.to_date %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<% if policy(@organization).add_member? %>
  <%= link_to t('add_member'), new_organization_membership_path(@organization), class: 'btn btn-primary' %>
<% end %>
